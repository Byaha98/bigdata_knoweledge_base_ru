<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>4 ัะฐััั ะะฐะทะฒะพัะฐัะธะฒะฐะตะผ Airflow 3.0.3 ะธ DBT</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="Quartz 4"/><meta property="og:title" content="4 ัะฐััั ะะฐะทะฒะพัะฐัะธะฒะฐะตะผ Airflow 3.0.3 ะธ DBT"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="4 ัะฐััั ะะฐะทะฒะพัะฐัะธะฒะฐะตะผ Airflow 3.0.3 ะธ DBT"/><meta name="twitter:description" content="ะั ะฝะฐะบะพะฝะตั-ัะพ ะณะฐะนะด ะฟะพ Airflow+DBT!๐ช ะัะพัะปัะต ััะฐััะธ ะฒ ัะฐะผะบะฐั ะดะพะผะฐัะฝะตะณะพ ะฟะพะปะธะณะพะฝะฐ ะดะฐัะฐ ะธะฝะถะตะฝะตัะธะธ ะธ ะฐะฝะฐะปะธัะธะบะธ: ะะฐะบ ะฟะพััะฐะฒะธัั WSL, docker ะธ ัะฑัะฝัั ะฒ ะฝะตะณะพ ะธ Dbeaver ะดะปั ัะฐะฑะพัั ั ะะ 1 ะงะฐััั Dbeaver Docker WSL Ubuntu ะะฐะบ ัะฐะทะฒะตัะฝััั ั ัะตะฑั Clickhouse ะปะพะบะฐะปัะฝะพ: 2 ะงะฐััั ะะพะบะฐะปัะฝะพะต ะฟะพะดะฝััะธะต Clickhouse ะะฐะบ ะฟะพะดะณะพ..."/><meta property="og:description" content="ะั ะฝะฐะบะพะฝะตั-ัะพ ะณะฐะนะด ะฟะพ Airflow+DBT!๐ช ะัะพัะปัะต ััะฐััะธ ะฒ ัะฐะผะบะฐั ะดะพะผะฐัะฝะตะณะพ ะฟะพะปะธะณะพะฝะฐ ะดะฐัะฐ ะธะฝะถะตะฝะตัะธะธ ะธ ะฐะฝะฐะปะธัะธะบะธ: ะะฐะบ ะฟะพััะฐะฒะธัั WSL, docker ะธ ัะฑัะฝัั ะฒ ะฝะตะณะพ ะธ Dbeaver ะดะปั ัะฐะฑะพัั ั ะะ 1 ะงะฐััั Dbeaver Docker WSL Ubuntu ะะฐะบ ัะฐะทะฒะตัะฝััั ั ัะตะฑั Clickhouse ะปะพะบะฐะปัะฝะพ: 2 ะงะฐััั ะะพะบะฐะปัะฝะพะต ะฟะพะดะฝััะธะต Clickhouse ะะฐะบ ะฟะพะดะณะพ..."/><meta property="og:image:alt" content="ะั ะฝะฐะบะพะฝะตั-ัะพ ะณะฐะนะด ะฟะพ Airflow+DBT!๐ช ะัะพัะปัะต ััะฐััะธ ะฒ ัะฐะผะบะฐั ะดะพะผะฐัะฝะตะณะพ ะฟะพะปะธะณะพะฝะฐ ะดะฐัะฐ ะธะฝะถะตะฝะตัะธะธ ะธ ะฐะฝะฐะปะธัะธะบะธ: ะะฐะบ ะฟะพััะฐะฒะธัั WSL, docker ะธ ัะฑัะฝัั ะฒ ะฝะตะณะพ ะธ Dbeaver ะดะปั ัะฐะฑะพัั ั ะะ 1 ะงะฐััั Dbeaver Docker WSL Ubuntu ะะฐะบ ัะฐะทะฒะตัะฝััั ั ัะตะฑั Clickhouse ะปะพะบะฐะปัะฝะพ: 2 ะงะฐััั ะะพะบะฐะปัะฝะพะต ะฟะพะดะฝััะธะต Clickhouse ะะฐะบ ะฟะพะดะณะพ..."/><meta property="twitter:domain" content="Byaha98.github.io/bigdata_knoweledge_base_ru"/><meta property="og:url" content="https://byaha98.github.io/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT"/><meta property="twitter:url" content="https://byaha98.github.io/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT"/><link rel="icon" href="../../../../static/icon.png"/><meta name="description" content="ะั ะฝะฐะบะพะฝะตั-ัะพ ะณะฐะนะด ะฟะพ Airflow+DBT!๐ช ะัะพัะปัะต ััะฐััะธ ะฒ ัะฐะผะบะฐั ะดะพะผะฐัะฝะตะณะพ ะฟะพะปะธะณะพะฝะฐ ะดะฐัะฐ ะธะฝะถะตะฝะตัะธะธ ะธ ะฐะฝะฐะปะธัะธะบะธ: ะะฐะบ ะฟะพััะฐะฒะธัั WSL, docker ะธ ัะฑัะฝัั ะฒ ะฝะตะณะพ ะธ Dbeaver ะดะปั ัะฐะฑะพัั ั ะะ 1 ะงะฐััั Dbeaver Docker WSL Ubuntu ะะฐะบ ัะฐะทะฒะตัะฝััั ั ัะตะฑั Clickhouse ะปะพะบะฐะปัะฝะพ: 2 ะงะฐััั ะะพะบะฐะปัะฝะพะต ะฟะพะดะฝััะธะต Clickhouse ะะฐะบ ะฟะพะดะณะพ..."/><meta name="generator" content="Quartz"/><link href="../../../../index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2tvbnN0YW50aW4vRG9jdW1lbnRzL2JhemFfem5hbml5L2JpZ2RhdGFfa25vd2VsZWRnZV9iYXNlX3J1L3F1YXJ0ei9jb21wb25lbnRzL3N0eWxlcyIsInNvdXJjZXMiOlsibWVybWFpZC5pbmxpbmUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7O0FBS0Y7RUFDRTtFQUNBOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUY7RUFDRTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhwYW5kLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBwYWRkaW5nOiAwLjRyZW07XG4gIG1hcmdpbjogMC4zcmVtO1xuICByaWdodDogMDsgLy8gTk9URTogcmlnaHQgd2lsbCBiZSBzZXQgaW4gbWVybWFpZC5pbmxpbmUudHNcbiAgY29sb3I6IHZhcigtLWdyYXkpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWRhcmspO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodCk7XG4gIGJvcmRlcjogMXB4IHNvbGlkO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG9wYWNpdHk6IDA7XG4gIHRyYW5zaXRpb246IDAuMnM7XG5cbiAgJiA+IHN2ZyB7XG4gICAgZmlsbDogdmFyKC0tbGlnaHQpO1xuICAgIGZpbHRlcjogY29udHJhc3QoMC4zKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7XG4gIH1cblxuICAmOmZvY3VzIHtcbiAgICBvdXRsaW5lOiAwO1xuICB9XG59XG5cbnByZSB7XG4gICY6aG92ZXIgPiAuZXhwYW5kLWJ1dHRvbiB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2l0aW9uOiAwLjJzO1xuICB9XG59XG5cbiNtZXJtYWlkLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgY29udGFpbjogbGF5b3V0O1xuICB6LWluZGV4OiA5OTk7XG4gIGxlZnQ6IDA7XG4gIHRvcDogMDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBoZWlnaHQ6IDEwMHZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBkaXNwbGF5OiBub25lO1xuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpO1xuXG4gICYuYWN0aXZlIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIH1cblxuICAmID4gI21lcm1haWQtc3BhY2Uge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIGhlaWdodDogODB2aDtcbiAgICB3aWR0aDogODB2dztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgJiA+IC5tZXJtYWlkLWNvbnRlbnQge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMXMgZWFzZTtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgbWluLWhlaWdodDogMjAwcHg7XG4gICAgICBtaW4td2lkdGg6IDIwMHB4O1xuXG4gICAgICBwcmUge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIH1cblxuICAgICAgc3ZnIHtcbiAgICAgICAgbWF4LXdpZHRoOiBub25lO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICB9XG4gICAgfVxuXG4gICAgJiA+IC5tZXJtYWlkLWNvbnRyb2xzIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTogMjBweDtcbiAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogOHB4O1xuICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICB6LWluZGV4OiAyO1xuXG4gICAgICAubWVybWFpZC1jb250cm9sLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWJvZHlGb250KTtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxcHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIHJlc2V0IGJ1dHRvbiBkaWZmZXJlbnRseVxuICAgICAgICAmOm50aC1jaGlsZCgyKSB7XG4gICAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMCAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="../../../../prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("../../../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://Byaha98.github.io/bigdata_knoweledge_base_ru/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://Byaha98.github.io/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT-og-image.webp"/><meta property="og:image:url" content="https://Byaha98.github.io/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT-og-image.webp"/><meta name="twitter:image" content="https://Byaha98.github.io/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/4-chast-Razvorachivaem-Airflow-3.0.3-i-DBT" data-base-path="/bigdata_knoweledge_base_ru"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="/bigdata_knoweledge_base_ru/">Quartz 4</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-83"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-83" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="/bigdata_knoweledge_base_ru/">Home</a><p> โฏ </p></div><div class="breadcrumb-element"><a href="/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/">ะะฐะทะฐ ะทะฝะฐะฝะธะน bigdata ะฝะฐ ััััะบะพะผ ัะทัะบะต</a><p> โฏ </p></div><div class="breadcrumb-element"><a href="/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/">ะกัะฐััะธ ะฟะพ ะฟะพะปะธะณะพะฝั BigData</a><p> โฏ </p></div><div class="breadcrumb-element"><a href>4 ัะฐััั ะะฐะทะฒะพัะฐัะธะฒะฐะตะผ Airflow 3.0.3 ะธ DBT</a></div></nav><h1 class="article-title">4 ัะฐััั ะะฐะทะฒะพัะฐัะธะฒะฐะตะผ Airflow 3.0.3 ะธ DBT</h1><p show-comma="true" class="content-meta"><time datetime="2026-01-31T07:45:53.000Z">Jan 31, 2026</time><span>13 min read</span></p></div></div><article class="popover-hint"><p>ะั ะฝะฐะบะพะฝะตั-ัะพ ะณะฐะนะด ะฟะพ Airflow+DBT!๐ช</p>
<p>ะัะพัะปัะต ััะฐััะธ ะฒ ัะฐะผะบะฐั ะดะพะผะฐัะฝะตะณะพ ะฟะพะปะธะณะพะฝะฐ ะดะฐัะฐ ะธะฝะถะตะฝะตัะธะธ ะธ ะฐะฝะฐะปะธัะธะบะธ:</p>
<p>ะะฐะบ ะฟะพััะฐะฒะธัั WSL, docker ะธ ัะฑัะฝัั ะฒ ะฝะตะณะพ ะธ Dbeaver ะดะปั ัะฐะฑะพัั ั ะะ
<a href="/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/1-Chast-Dbeaver-Docker-WSL-Ubuntu/" class="internal alias" data-slug="Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/1-Chast-Dbeaver-Docker-WSL-Ubuntu/index">1 ะงะฐััั Dbeaver Docker WSL Ubuntu</a>
ะะฐะบ ัะฐะทะฒะตัะฝััั ั ัะตะฑั Clickhouse ะปะพะบะฐะปัะฝะพ:ย
<a href="/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/2-Chast-Lokalnoe-podnyatie-Clickhouse/" class="internal alias" data-slug="Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/2-Chast-Lokalnoe-podnyatie-Clickhouse/index">2 ะงะฐััั ะะพะบะฐะปัะฝะพะต ะฟะพะดะฝััะธะต Clickhouse</a>
ะะฐะบ ะฟะพะดะณะพัะพะฒะธัั VS code ะธ WSL ะบ ัะฐะฑะพัะต ะฝะฐ ะฟะพะปะธะณะพะฝะต
<a href="/bigdata_knoweledge_base_ru/Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/3-Chast-Podgotovka-WSL-i-VS-code-k-poligonu/" class="internal alias" data-slug="Baza-znaniy-bigdata-na-russkom-yazyke/Stati-po-poligonu-BigData/3-Chast-Podgotovka-WSL-i-VS-code-k-poligonu/index">3 ะงะฐััั ะะพะดะณะพัะพะฒะบะฐ WSL ะธ VS code ะบ ะฟะพะปะธะณะพะฝั</a></p>
<p>ะัะฐะบ, Airflow ั DBT ะฒะฝัััะธ ะฑัะดะตะผ ะฟะพะดะฝะธะผะฐัั ัะตัะตะท Docker compose. ะจะพ ััะพ ัะฐะบะพะต?</p>
<p>docker-compose โ ััะพ ะธะฝััััะผะตะฝั ะดะปั ะทะฐะฟััะบะฐ ะฝะตัะบะพะปัะบะธั ะบะพะฝัะตะนะฝะตัะพะฒ ััะฐะทั, ั ะฟะพะผะพััั ะพะดะฝะพะณะพ YAML-ัะฐะนะปะฐ (docker-compose.yml).</p>
<p>ะะผะตััะพ ัะพะณะพ ััะพะฑั ะทะฐะฟััะบะฐัั ะบะฐะถะดัะน ะบะพะฝัะตะนะฝะตั ะฟะพ ะพัะดะตะปัะฝะพััะธ ะธ ะฒัััะฝัั ะฟัะพะฟะธััะฒะฐัั ะบััั ะบะพะผะฐะฝะด, ัั ะพะฟะธััะฒะฐะตัั, ััะพ ะธ ะบะฐะบ ะฝัะถะฝะพ ะทะฐะฟัััะธัั, ะฒ ะพะดะฝะพะผ ะบะพะฝัะธะณะต.</p>
<p>ะัะธะผะตั:</p>
<p>ะฅะพัะตัั ัะฐะทะฒะตัะฝััั Airflow? ะะฝ ัะพััะพะธั ะธะท ะฝะตัะบะพะปัะบะธั ัะฐััะตะน:</p>
<ol>
<li>
<p>web-ะธะฝัะตััะตะนั (UI),</p>
</li>
<li>
<p>scheduler (ะฟะปะฐะฝะธัะพะฒัะธะบ),</p>
</li>
<li>
<p>ะฑะฐะทะฐ ะดะฐะฝะฝัั</p>
</li>
</ol>
<p>ะญัะพ ะบะฐะบ ะผะธะฝะธะผัะผ๐</p>
<p>ะก docker-compose ัั ะฟัะพััะพ ะฟะธัะตัั, ะบะฐะบ ะฒัั ััะพ ะดะพะปะถะฝะพ ัะฐะฑะพัะฐัั ะฒะผะตััะต โ ะธ ะทะฐะฟััะบะฐะตัั ะพะดะฝะพะน ะบะพะผะฐะฝะดะพะน.๐ฆ</p>
<p>ะะฐัะพะดะธะผ ะฒ ะฝะฐั Workspace ะฒ Vs Code ะธะท ะฟัะพัะปะพะณะพ ะณะฐะนะดะฐ ะธ ัะพะทะดะฐะตะผ ะฟะฐะฟะบั ะดะปั ะดะพะบะตั ะบะพะผะฟะพะทะฐ (ะธะทะฝะฐัะฐะปัะฝะพ ั ะฝะฐะทะฒะฐะป ะตะต docker_folder, ะฝะพ ะปัััะต ะฝะฐะฒะตัะฝะพะต airflow_dbt ะฝะฐะทะฒะฐัั ะธะปะธ ะบะฐะบ-ัะพ ัะฐะบ)ย</p>
<p>ะ ัะปััะฐะต ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะธั ะฟะฐะฟะบะธ, ะฝะพ ะฟัะธ ััะพะผ ะฒั ัะฐะฝะตะต ะทะฐะฟััะบะฐะปะธ ะธะท ััะฐัะพะน ะฟะฐะฟะบะธ ะบะพะฝัะตะนะฝะตัั, ะฟะพัะธััะธัะต ะบะพะฝัะตะนะฝะตัั ะธ ัะตัะธ ะพั ััะฐัะพะน ะฟะฐะฟะบะธ:</p>
<pre><code>docker compose -p docker_folderย down --volumes
</code></pre>
<p>ะัะบััะฒะฐะตะผ ะฟะฐะฟะบั poligon ะธะท ัะตัะผะธะฝะฐะปะฐ:</p>
<pre><code>su konstantin
</code></pre>
<p>ะขัั ะฟะพะฝััะฝะพ, ััะพ ััะพ ะฒะฐั ัะทะตั ะฑัะดะตั,ย ั ะผะตะฝั ะฒ ะดะฐะฝะฝะพะผ ัะปััะฐะต konstantin</p>
<p>ะะตะปะฐะตะผ ะฝะฐัั ะฟะฐะฟะบั:</p>
<pre><code>mkdir docker_folder
</code></pre>
<p>ะะฐะปะตะต ะฒะฒะพะดะธะผ ะณััะฟะฟั ะบะพะผะฐะฝะด (ะบะฐะถะดัั ะฟะพ ะพัะตัะตะดะธ) ะดะปั ัะตะบัััะธะฒะฝะพะณะพ ะดะพัััะฟะฐ ะฝะฐัะตะณะพ ัะทะตัะฐ ะบะพ ะฒัะตะผั ะฟะพัะตะฝัะธะฐะปัะฝะพะผั ัะพะดะตัะถะธะผะพะผั ะฟะฐะฟะบะธ:</p>
<pre><code>sudo chown -R konstantin:konstantin /home/konstantin/poligon/docker_folder
</code></pre>
<pre><code>sudo apt install acl
</code></pre>
<pre><code>chmod g+s /home/konstantin/poligon/docker_folder
</code></pre>
<pre><code>sudo setfacl -R -m u:konstantin:rwx,g:konstantin:rwx /home/konstantin/poligon/docker_folder
</code></pre>
<pre><code>sudo setfacl -R -d -m u:konstantin:rwx,g:konstantin:rwx /home/konstantin/poligon/docker_folder
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_1.png" width="auto" height="auto" alt/>
ะญัะธ ะบะพะผะฐะฝะดั ะดะตะปะฐัั ัะปะตะดัััะตะต:</p>
<ol>
<li>
<p>ะะตะบัััะธะฒะฝะพ ะฝะฐะทะฝะฐัะฐัั ะฒะฐั (konstantin ะฒ ะผะพะตะผ ัะปััะฐะต) ะฒะปะฐะดะตะปััะตะผ ะฒัะตั ัะฐะนะปะพะฒ ะธ ะฟะฐะฟะพะบ.</p>
</li>
<li>
<p>ะฃััะฐะฝะฐะฒะปะธะฒะฐัั ะฟะพะดะดะตัะถะบั ัะฐััะธัะตะฝะฝัั ะฟัะฐะฒ (ACL), ััะพะฑั ะผะพะถะฝะพ ะฑัะปะพ ะณะธะฑะบะพ ะทะฐะดะฐะฒะฐัั ัะฐะทัะตัะตะฝะธั.</p>
</li>
<li>
<p>ะะบะปััะฐัั setgid, ััะพะฑั ะฝะพะฒัะต ัะฐะนะปั ัะฝะฐัะปะตะดะพะฒะฐะปะธ ะฝัะถะฝัั ะณััะฟะฟั.</p>
</li>
<li>
<p>ะก ะฟะพะผะพััั ACL ะดะฐัั ัะตะฑะต ะธ ัะฒะพะตะน ะณััะฟะฟะต ะฟะพััะพัะฝะฝัะน ะฟะพะปะฝัะน ะดะพัััะฟ ะบ ัะตะบััะธะผ ะธ ะปัะฑัะผ ะฑัะดััะธะผ ัะฐะนะปะฐะผ ะฒ ะฟะฐะฟะบะต.</p>
</li>
</ol>
<p>ะะฐะปะตะต ะฒ ะฟะฐะฟะบะต:</p>
<p>ะ ะฝะตะน ัะพะทะดะฐะตะผ ัะฐะนะป ั ะฝะตัะธัััะผ ะฝะฐะทะฒะฐะฝะธะตะผ Dockerfile(ะฑะตะท ัะฐััะธัะตะฝะธั .)</p>
<p>ะะฐะฟะพะปะฝัะตะผ ัะฐะนะป ัะปะตะดัััะธะผ ัะพะดะตัะถะธะผัะผ:</p>
<pre><code># ะัะฟะพะปัะทัะตะผ ะพัะธัะธะฐะปัะฝัะน ะพะฑัะฐะท Apache Airflow ะฒะตััะธะธ 3.0.3 ะะะะะะจะะ ะะซะะะะ

FROM apache/airflow:3.0.3

#1000-ะญัะพ ะฝะฐั ะฟะพะปัะทะพะฒะฐัะตะปั ั ัะพััะพะฒะพะน ะผะฐัะธะฝั, ะบะพัะพััะน ะฑัะดะตั ะทะฐะฟััะบะฐัั Airflow ะธ DBT

#ะัะปะธ ะฒั ะฝะต ะทะฝะฐะตัะต ัะฒะพะน UID, ัะพ ะฒะฒะตะดะธัะต ะฒ ัะตัะผะธะฝะฐะปะต ะบะพะผะฐะฝะดั id ะธ ะฟะพัะผะพััะธัะต ะฝะฐ ะทะฝะฐัะตะฝะธะต UID

USER root

# ะฃััะฐะฝะพะฒะบะฐ Python ะธ ัะธััะตะผะฝัั ะทะฐะฒะธัะธะผะพััะตะน

RUN apt-get update &amp;&amp; apt-get install -y git

  

# ะะฐะดะฐัะผ ะดะพัััะฟั ะดะปั ัะทะตัะพะฒ airflow ะธ default (UID 1000) ะดะปั /opt/dbt ะธ /opt/airflow

RUN mkdir -p /opt/dbt /opt/airflow/logs \

ยยยย&amp;&amp; chown -R 1000:1000 /opt/dbt /opt/airflow \

ยยยย&amp;&amp; chown -R airflow /opt/dbt /opt/airflow

USER 1000

#ัััะฐะฝะพะฒะบะฐ ัะตะดะฐะบัะพัะฐ ะบะพะดะฐ ะดะปั Airflow DAGs

# ะฃััะฐะฝะพะฒะบะฐ DBT ะธ ClickHouse-ะทะฐะฒะธัะธะผะพััะตะน

RUN pip install --no-cache-dir \

ยยยยairflow-code-editor==8.0.1 \

ยยยยblack isort fs-s3fs \

ยยยยdbt-core==1.10.4 \

ยยยยdbt-clickhouse==1.9.2 \

ยยยยairflow-clickhouse-plugin==1.5.0

  

# ะะพะฟะธััะตะผ ัะฐะฑะปะพะฝ profiles.yml ะะฑ ััะพะผ ัะฐะนะปะต ะฟะพะทะถะต ะฒ ะณะฐะนะดะต

COPY dbt/profiles.yml /opt/dbt/profiles.ymlยย

</code></pre>
<p>ยยยยยย</p>
<p>ะะผะตะผ ctrl+S ะดะปั ัะพััะฐะฝะตะฝะธั</p>
<p>ะัะต ะฝะฐะดะพ ัะพะทะดะฐัั ัะฐะนะป .env ะ ะฝะตะผ ะฑัะดัั ััะฐะฝะธัััั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะบะพะฝัะตะนะฝะตัะพะฒ.</p>
<p>.env โ ััะพ ะพะฑััะฝัะน ัะตะบััะพะฒัะน ัะฐะนะป, ะฒ ะบะพัะพัะพะผ ะฒั ััะฐะฝะธัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (environment variables) ะดะปั ะบะพะฝัะตะนะฝะตัะพะฒ.</p>
<p>ะะฝ ะธัะฟะพะปัะทัะตััั ะฒ docker-compose.yml, ััะพะฑั ะฝะต ะฟัะพะฟะธััะฒะฐัั ะบะพะฝัะธะดะตะฝัะธะฐะปัะฝัะต ะธะปะธ ัะฐััะพ ะผะตะฝัััะธะตัั ะดะฐะฝะฝัะต ะฝะฐะฟััะผัั ะฒ yaml-ัะฐะนะปะต.</p>
<p>ะกะพะทะดะฐะตะผ .env ะฒ ััะพะน ะถะต ะฟะฐะฟะบะต ะธ ะฝะฐะฟะพะปะฝัะตะผ ัะปะตะดัััะธะผ ัะพะดะตัะถะธะผัะผ:</p>
<p>ะัะพะฒะตัััะต, ััะพะฑั ะฟะฐัะพะปั ะบะปะธะบัะฐัะทะฐ ัะพัะฝะพ ะฑัะป ะฟััััะผ ะธ ะฑะตะท ะฟัะพะฑะตะปะพะฒ!</p>
<pre><code>
# =========================

# ๐ ClickHouse Connection

# =========================



CLICKHOUSE_HOST=host.docker.internal

CLICKHOUSE_PORT=8123

CLICKHOUSE_USERNAME=default

CLICKHOUSE_PASSWORD=

CLICKHOUSE_DATABASE=default

CLICKHOUSE_RAW_DATA_SCHEMA=default

# ะฅะพัั ClickHouse (ะธัะฟะพะปัะทัะตััั ะธะท Docker ะบะพะฝัะตะนะฝะตัะฐ; host.docker.internal โ alias ะฝะฐ ะปะพะบะฐะปัะฝัั ะผะฐัะธะฝั)

# HTTP-ะฟะพัั ClickHouse (ััะฐะฝะดะฐัั: 8123)

# ะะพะปัะทะพะฒะฐัะตะปั ClickHouse

# ะะฐัะพะปั (ะฒ ะดะฐะฝะฝะพะผ ัะปััะฐะต ะฟัััะพะน, ััะพ ะฟะพะดัะพะดะธั ะดะปั default)

# ะะฐะทะฐ ะดะฐะฝะฝัั ะฟะพ ัะผะพะปัะฐะฝะธั

# ะกัะตะผะฐ ะดะปั &quot;ััััั&quot; ะดะฐะฝะฝัั (RAW-ัะฐะทะฐ ELT/ETL ะฟัะพัะตััะฐ)

# ========================

# โ๏ธ Airflow (Docker-Compose)

# ========================



AIRFLOW_UID=1000ย # UID ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ, ัะพะฒะฟะฐะดะฐััะธะน ั ัะตะบััะธะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะผ ะฝะฐ ัะพััะต (ะฝะฐะฟัะธะผะตั, `id -u`), ััะพะฑั ะฝะต ะฑัะปะพ ะฟัะพะฑะปะตะผ ั ะฟัะฐะฒะฐะผะธย



# =====================

# ๐ dbt (Data Build Tool)

# =====================



DBT_PROFILES_DIR=/opt/dbtย # ะะฐัะฐะปะพะณ, ะณะดะต dbt ะธัะตั profiles.yml (ัะฐะนะป ั ะฝะฐัััะพะนะบะฐะผะธ ะฟะพะดะบะปััะตะฝะธั ะบ DWH).

# ะะตัะตะผะตะฝะฝะฐั ะฟะตัะตะพะฟัะตะดะตะปัะตั ะดะตัะพะปั (~/.dbt/) ะธ ัะธะบัะธััะตั ะฟััั ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ
</code></pre>
<p>ะะฐะปะตะต ัะพะทะดะฐะตะผ ะฟะฐะฟะบั dbt (ะผะพะถะฝะพ ะฟัะพััะพ ะฒ VS code ะฒัะต ัะพะทะดะฐะฒะฐัั ัะตะฟะตัั) ะธ ัะพะทะดะฐะตะผ ะฒ ะฝะตะน ัะฐะนะป profiles.yml. ะะฐะฟะพะปะฝัะตะผ ะตะณะพ ัะปะตะดัััะธะผ ัะพะดะตัะถะธะผัะผ:</p>
<pre><code>poligon:

ยยtarget: dev

ยยoutputs:

ยยยยdev:

ยยยยยยtype: clickhouse

ยยยยยยdriver: http

ยยยยยยhost: &quot;{{ env_var('CLICKHOUSE_HOST') }}&quot;

ยยยยยยport: &quot;{{ env_var('CLICKHOUSE_PORT') | as_number }}&quot;ย #| as_number โ ะฟัะตะพะฑัะฐะทัะตั ัััะพะบั &quot;8123&quot; ะฒ ัะธัะปะพ 8123

ยยยยยยuser: &quot;{{ env_var('CLICKHOUSE_USERNAME') }}&quot;

ยยยยยยpassword: &quot;{{ env_var('CLICKHOUSE_PASSWORD') }}&quot;

ยยยยยยdatabase: &quot;{{ env_var('CLICKHOUSE_DATABASE') }}&quot;

ยยยยยยschema: &quot;{{ env_var('CLICKHOUSE_RAW_DATA_SCHEMA') }}&quot;

ยยยยยยsecure: falseย # ะัะปะธ ClickHouse ะฝะฐัััะพะตะฝ ะฝะฐ SSL, ัะพ ะฝัะถะฝะพ ัะบะฐะทะฐัั true, ะธะฝะฐัะต false

  

#env_var(...) โ ััะฝะบัะธั dbt ะดะปั ะทะฐะณััะทะบะธ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั ะธะท .env
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_2.png" width="auto" height="auto" alt/></p>
<p>ะัั, ััะพ ะฝะฐัะพะดะธััั ะฒะฝัััะธ {{ โฆ }}, ะพะฑัะฐะฑะฐััะฒะฐะตััั ัะตัะตะท ัะฐะฑะปะพะฝะธะทะฐัะพั Jinja2 โ ััะพ ัะพั ะถะต ัะฐะฑะปะพะฝะธะทะฐัะพั, ะบะพัะพััะน ะธัะฟะพะปัะทัะตััั ะฒะฝัััะธ SQL-ะผะพะดะตะปะตะน DBT (ะฒ models/*.sql), ะผะฐะบัะพัะฐั ะธ ั.ะด. ะั ะตะณะพ ัะถะต ัััะฐะฝะพะฒะธะปะธ ะฒ ะฟัะพัะปะพะผ ะณะฐะนะดะต ะธ ะฒะฟะตัะฒัะต ัะฒะธะดะตะปะธ ะฒะพะพัะธั! ะัััะฐั ััะตะฝั, ัะบะฐะถั ั ะฒะฐะผ!๐</p>
<p>ะขะตะฟะตัั ัะพะทะดะฐะตะผ ัะฐะนะป ััะดะพะผ ะธ ะฝะฐะทัะฒะฐะตะผ ะตะณะพ docker-compose.yml ะดะปั airflow. ะญัะพ ะบะพะฝัะธะณััะฐัะธั ะฝะฐัะตะณะพ ะบะพะผะฟะพะทะธะบะฐ ะฒ ัะพัะผะฐัะต ัะผะป:</p>
<p>ะฏ ัะถะต ะฟะพะดะณะพัะพะฒะธะป ะตะณะพ, ะฝะพ ะพะฝ ะดะพะฒะพะปัะฝะพ ะฑะพะปััะพะน, ะฟัะธะปะพะถั ะฟะพะด ะฟะพััะพะผ, ะฑะฐัะฐะตะผ ะตะณะพ ะฒ docker_folder.
<a href="https://github.com/Byaha98/bigdata_knoweledge_base_ru/blob/main/%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20bigdata%20%D0%BD%D0%B0%20%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%BE%D0%BC%20%D1%8F%D0%B7%D1%8B%D0%BA%D0%B5/%D0%A1%D1%82%D0%B0%D1%82%D1%8C%D0%B8%20%D0%BF%D0%BE%20%D0%BF%D0%BE%D0%BB%D0%B8%D0%B3%D0%BE%D0%BD%D1%83%20BigData/airflow_dbt_compose/docker-compose.yml" class="external">https://github.com/Byaha98/bigdata_knoweledge_base_ru/blob/main/%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20bigdata%20%D0%BD%D0%B0%20%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%BE%D0%BC%20%D1%8F%D0%B7%D1%8B%D0%BA%D0%B5/%D0%A1%D1%82%D0%B0%D1%82%D1%8C%D0%B8%20%D0%BF%D0%BE%20%D0%BF%D0%BE%D0%BB%D0%B8%D0%B3%D0%BE%D0%BD%D1%83%20BigData/airflow_dbt_compose/docker-compose.yml<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>ะขะตะฟะตัั ะฒัะต ะณะพัะพะฒะพ ะดะปั ะทะฐะฟััะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ. ะะฐะผ ะฝัะถะตะฝ ะดะปั ััะพะณะพ ััะฐััะน ะดะพะฑััะน ัะตัะผะธะฝะฐะป. ะะผะตะผ ะฟัะฐะฒะพะน ะบะฝะพะฟะบะพะน ะผััะธ ะฝะฐ ะฟะฐะฟะบั docker_folder ะธ ะฑะฐัะฐะตะผ โOpen in Integrated Terminalโ.
<img src="../../../../attachments/poligon_airflow_dbt_3.png" width="auto" height="auto" alt/></p>
<p>ะะฐะนะดะตะผ ะฒ ะฝะฐัะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั:</p>
<pre><code>su ะฟะพะปัะทะพะฒะฐัะตะปัะฝะตะนะผ
</code></pre>
<p>ะะพัะฐ ะทะฐะฟัััะธัั ะฝะฐั ะบะพะผะฟะพะทะธะบ!</p>
<p>ะััะพัะพะถะฝะพ! ะะฐั ะพะฑัะฐะท Airflow ะฒะตัะธั ะฝะตัะบะพะปัะบะพ ะณะธะณะฐะฑะฐะนั, ะพัะพะฑะตะฝะฝะพ ั Python + ะทะฐะฒะธัะธะผะพัััะผะธ. ะัะฒะพะฑะพะดะธัะต ะผะตััะพ ะฝะฐ ะดะธัะบะต, ะตัะปะธ ะผะฐะปะพ.</p>
<p>ะะฐัะฐะตะผ:</p>
<pre><code>docker compose build
</code></pre>
<p>ะะดะตะผ, ะฟะพะบะฐ ะฒัะต ะฟะพัััะพะธััั. ะะพะถะตั ะทะฐะฝะธะผะฐัั ะพั 2 ะดะพ 30+ ะผะธะฝัั, ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะฒะฐัะตะณะพ ะธะฝะตัะฐ ะธ ะบะพะผะฟะธะบะฐ. ะฃ ะผะตะฝั ะพะบะพะปะพ 20 ะผะธะฝัั ะทะฐะฝัะปะพ.</p>
<p>ะัะปะธ ะฑัะดะตัะต ะฒ ะฑัะดััะตะผ ะดะตะปะฐัั ะฝะพะฒัะต build ั ะฝะตะทะฝะฐัะธัะตะปัะฝัะผะธ ะธะทะผะตะฝะตะฝะธัะผะธ ะฒ ัะฐะนะปะฐั, ะทะฐ ััะตั ะบััะธัะพะฒะฐะฝะธั ัะปะพะตะฒ Docker ะฑัะดะตั ััะพ ะดะตะปะฐัั ะฒ ัะฐะทั ะฑััััะตะต. ะฃ ะผะตะฝั ััะพ ะฒะธะดะฝะพ ะฝะฐ ัะบัะธะฝะฐั, ั.ะบ. ั ะฝะต ั ะฟะตัะฒะพะณะพ ัะฐะทะฐ ะฝะฐัััะพะธะป ะฒัะต)))</p>
<p>ะะปะฐะฒะฝะพะต - ะดะพะถะดะฐัััั ะทะฐะฒะตัะฝัั ัััะพะบ:</p>
<pre><code>[+] Building 5/5

ยโ๏ธ airflow-apiserverย ย ย Builtย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0.0sย

ยโ๏ธ airflow-init ย ย ย ย ย Builtย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0.0sย

ยโ๏ธ airflow-dag-processorย Builtย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0.0sย

ยโ๏ธ airflow-schedulerย ย ย Builtย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0.0sย

ยโ๏ธ airflow-triggererย ย ย Builtย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0.0s
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_4.png" width="auto" height="auto" alt/></p>
<p>ะะพัะปะต ัะพะณะพ, ะบะฐะบ ัะดะตะปะฐะปะธ build, ะทะฐะฟััะบะฐะตะผ ัะฝะฐัะฐะปะฐ init:</p>
<pre><code>docker compose up airflow-init
</code></pre>
<p>ะะดะตะผ ะฝะฐะดะฟะธัะธ  ะพะบะพะฝัะฐะฝะธั ัะฐะทะฒะตัััะฒะฐะฝะธั:</p>
<pre><code>
airflow-init-1 exited with code 0
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_5.png" width="auto" height="auto" alt/>
ะะฐัะฐะตะผ ะดะพะบะตั ะฟั</p>
<pre><code>docker ps
</code></pre>
<p>ะะธะดะธะผ, ััะพ ะฟะพะดะฝัะปัั ัะพะปัะบะพ ะฟะพััะณัะตั. ะะพ ัะฐะบ ะธ ะดะพะปะถะฝะพ ะฑััั, ะฟะพะดะฝะธะผะฐะตะผ ะฒัะต ะพััะฐะปัะฝัะต ะบะพะฝัะตะนะฝะตัั ัะตัะตะท ะบะพะผะฐะฝะดั:</p>
<pre><code>docker compose up -d
</code></pre>
<p>ะคะปะฐะณ -d ะฒ ะบะพะผะฐะฝะดะต docker compose up -d ะพะทะฝะฐัะฐะตั โdetached modeโ โ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต.</p>
<p>ะัะดัั ัััะพะบะธ ัะธะฟะฐ:</p>
<pre><code>
[+] Running 6/6

ยโ๏ธ Container docker_folder-postgres-1 ย ย ย ย ย ย ย Healthyย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 1.3sย

ยโ๏ธ Container docker_folder-airflow-scheduler-1ย ย ย Started ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 24.9sย

ยโ๏ธ Container docker_folder-airflow-dag-processor-1ย Started ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 25.0sย

ยโ๏ธ Container docker_folder-airflow-apiserver-1ย ย ย Started ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 24.8sย

ยโ๏ธ Container docker_folder-airflow-triggerer-1ย ย ย Started ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 24.8sย

ยโ๏ธ Container docker_folder-airflow-init-1 ย ย ย ย ย Exitedย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 24.0sย
</code></pre>
<p>ะะพะถะตะผ ะฟัะพะฒะตัะธัั ะฝะฐัะธ ะบะพะฝัะตะนะฝะตัั ัะตัะตะท ะบะพะผะฐะฝะดั</p>
<pre><code>docker ps
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_6.png" width="auto" height="auto" alt/>
ะะฐะบ ะทะฐะนัะธ ะฒ ะปะพะบะฐะปัะฝะพ ะฟะพะดะฝัััะน airflow?</p>
<p>ะะพะถะตะผ ะฒะฑะธัั ะฑัะฐัะทะตัะต</p>
<p><a href="http://localhost:8080/" class="external">http://localhost:8080/<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>ะะปะธ VS code ัะฐะผ ะฟัะตะดะปะพะถะธั ะฝะฐะผ ะทะฐะนัะธ ะฝะฐ ัะฐะนั ัะพะปัะบะพ ััะพ ัะพะทะดะฐะฝะฝะพะณะพ Airflow. ะะพะดะพะถะดะธัะต ะผะธะฝัั ะฟััั, ะฟัััั ัะตัะฒะฐะบ ะฟะพะดะฝะธะผะตััั</p>
<p>ะะพะณะธะฝ ะธ ะฟะฐัะพะปั ะดะปั Airflow ััะพ airflow ะธ airflow</p>
<p>ะะพะฝัะตะนะฝะตัะฐะผะธ, ัะดะตะปะฐะฝะฝัะผะธ ัะตัะตะท ะบะพะผะฟะพะท, ะปัััะต ะธ ัะฟัะฐะฒะปััั ัะตัะตะท ะบะพะผะฟะพะท:</p>
<pre><code>docker compose up -dย
</code></pre>
<p>ะะพะดะฝะธะผะฐะตั ัะตัะฒะธัั ะธ ะทะฐะฟััะบะฐะตั ะฒ ัะพะฝะต</p>
<pre><code>docker compose restartย 
</code></pre>
<p>ะะตัะตะทะฐะฟััะบะฐะตั ะฒัั (ะฝะฐะฟัะธะผะตั, ะฟะพัะปะต ะฟัะฐะฒะพะบ)</p>
<pre><code>docker compose stop
</code></pre>
<p>ะััะฐะฝะฐะฒะปะธะฒะฐะตั, ะฝะพ ะฝะต ัะดะฐะปัะตั</p>
<pre><code>docker compose start
</code></pre>
<p>ะะฐะฟััะบะฐะตั ะพััะฐะฝะพะฒะปะตะฝะฝัะต ะบะพะฝัะตะนะฝะตัั</p>
<pre><code>docker compose downย 
</code></pre>
<p>ะะพะปะฝะพัััั ะพััะฐะฝะฐะฒะปะธะฒะฐะตั ะธ ัะดะฐะปัะตั</p>
<p>ะขะตะฟะตัั ะผะพะถะตะผ ะฒะตัะฝััััั ะฒ ะฝะฐั VS Code. ะขะฐะบ ะบะฐะบ ั ะฝะฐั ะฟัะพะบะธะฝัั volume ะผะตะถะดั ะฟะฐะฟะบะพะน dags ั ะฝะฐั ะฒ docker_folder ะธ ะบะพะฝัะตะนะฝะตัะพะผ, ะฒัะต ะดะฐะณะธ, ะบะพัะพััะต ะผั ัะดะตะปะฐะตะผ ะฒ ะฟะฐะฟะบะต dags ั ัะตะฑั, ะฟะพะฟะฐะดัั ััั ะถะต ะฒ ะบะพะฝัะตะนะฝะตั. ะกะธะปะฐ ัะพะผะพะฒ Docker!๐</p>
<p>ะขะตะฟะตัั ะฝะฐะดะพ ะทะฐะนัะธ ะฒ ัะตัะผะธะฝะฐะป ะบะพะฝัะตะนะฝะตัะฐ (ะฒ ััะตะฑะฝัั ัะตะปัั, ะฒัะต ะฑัะดะตะผ ะดะตะปะฐัั ะฒ scheduler, ะฝะพ ะฒ ะฑะพะตะฒัั ััะปะพะฒะธัั ะปัััะต ะพัะดะตะปัะฝัะน worker-ะบะพะฝัะตะนะฝะตั)</p>
<p>ะะดะตะผ ะฒ ัะตัะผะธะฝะฐะป ะฝะฐัะตะน docker_folder ะธ ะฒะฒะพะดะธะผ ะบะพะผะฐะฝะดั ะฝะฐ ะทะฐัะพะด ะฒ ัะตัะผะธะฝะฐะป ะบะพะฝัะตะนะฝะตัะฐ. ะงัะพะฑั ะฝะฐะนัะธ ะธะผั ะบะพะฝัะตะนะฝะตัะฐ ะดะปั ะทะฐะฟััะบะฐ, ะดะตะปะฐะตะผ docker ps ะธ ัะผะพััะธะผ name ะฝัะถะฝะพะณะพ ะฝะฐะผ scheduler ะบะพะฝัะตะนะฝะตัะฐ:</p>
<pre><code>docker execย -it docker_folder-airflow-scheduler-1ย /bin/bashย
</code></pre>
<p>ะฃ ะฝะฐั ะฑัะดะตั ะฟะพะปัะทะพะฒะฐัะตะปั default. ะะตัะตัะพะดะธะผ ะฒ ะฟะฐะฟะบั dbt ัะตัะตะท ัะปะตะดัััะธะต ะบะพะผะฐะฝะดั:</p>
<pre><code>cd .. &amp;&amp; cd dbt
</code></pre>
<p>ะัะต ะณะพัะพะฒะพ ะบ ัะพะทะดะฐะฝะธั DBT ะฟัะพะตะบัะฐ! ะะฐะฒะฐะนัะต ัะดะตะปะฐะตะผ ััะพ! ะะฒะพะดะธะผ:</p>
<pre><code>dbt init poligon
</code></pre>
<p>poligon - ะธะผั ะบะพะฝัะตะนะฝะตัะฐ, profiles dir ะฟะพะผะตัะฐะตั, ะณะดะต ั ะฝะฐั ะบะพะฝัะธะณ ัะฐะนะปะฐ profiles. (ะั ะตะณะพ ะฟัะพะบะธะฝัะปะธ ะฒ opt/dbt ะธะท docker_folder/dbt).</p>
<pre><code>The profile poligon already exists in /opt/dbt/profiles.yml. Continue and overwrite it? [y/N]:
</code></pre>
<p>ย - ะฟะธัะตะผ y, ะฑะฐัะฐะตะผ enter</p>
<p>ะฃ ะฝะฐั ัะฟัะพััั, ะบะฐะบัั ะะ ัะทะฐัั, ะตััะตััะฒะตะฝะฝะพ ะถะผะตะผ ัะธััั 1 - clickhouse!</p>
<pre><code>Which database would you like to use?

[1] clickhouse
</code></pre>
<p><img src="../../../../attachments/poligon_airflow_dbt_7.png" width="auto" height="auto" alt/>
<img src="../../../../attachments/poligon_airflow_dbt_8.png" width="auto" height="auto" alt/>
ะัะดะตั ะฟัะตะดัะฟัะตะถะดะตะฝะธะต ัะธะฟะฐ <code>12:00:06ย No sample profile found for clickhouse.</code> ะขัั ะฝะธัะตะณะพ ัััะฐัะฝะพะณะพ</p>
<p>ะัะต! DBT ะฟัะพะตะบั ัะพะทะดะฐะฝ, ะผะพะถะฝะพ ะฝะฐะถะธะผะฐัั exit ะธ ะธะดัะธ ะฒ ะฑัะฐัะทะตั ะฒ UI Airflow!</p>
<p>ะะพะถะฝะพ ะฒะฒะตััะธ ะบะพะผะฐะฝะดั exit ะดะปั ะฒััะพะดะฐ ะธะท ะบะพะฝัะตะนะฝะตัะฐ, ัะฐะบะถะต ะผะพะถะฝะพ ัะฒะธะดะตัั, ััะพ DBT ะฟัะพะตะบั ัะผะพะฝัะธัะพะฒะฐะปัั ะธ ะฝะฐ ัะพัั!</p>
<p>ะะฐะฒะฐะนัะต ัะฐะบะถะต ะฟะพะดะฝะธะผะตะผ Clickhouse! ะฃะฒั, ะบะปะธะบัะฐัะท ะธะท ะฟัะพัะปะพะณะพ ะณะฐะนะดะฐ ะฟัะธะดะตัััั ัะฑะธััโฆ โฐ๏ธ</p>
<pre><code>
docker rm clickhouse-server (ะธะปะธ ะฒะฐัะต ะฝะฐะทะฒะฐะฝะธะต)
</code></pre>
<p>ะขะตะฟะตัั ะฝะฐะดะพ ะฑัะดะตั ะทะฐะฟัััะธัั ะตะณะพ ั ะฝะตัะบะพะปัะบะพ ะธะฝัะผะธ ะฟะฐัะฐะผะตััะฐะผะธ ะทะฐะฟััะบะฐ. ะะต ะฑะพะนัะตัั! ััะพ ะฝะธะบะฐะบ ะฝะต ะฟะพะฒะปะธัะตั ะฝะฐ connection ะฒ Dbeaver ะธะท ะฟัะพัะปะพะณะพ ะณะฐะนะดะฐ! ะัะต ะพััะฐะฝะตััั!๐ง</p>
<pre><code>
docker run -d \

ยย--name clickhouse-server \

ยย--network=host \

ยย--cap-add=SYS_NICE \

ยย--cap-add=NET_ADMIN \

ยย--cap-add=IPC_LOCK \

ยย-v clickhouse-data:/var/lib/clickhouse \

ยย-v clickhouse-logs:/var/log/clickhouse-server \

ยยclickhouse/clickhouse-server:24.3.6
</code></pre>
<p>ะะฐะฒะฐะนัะต ะฝะฐะฟะธัะตะผ DAG, ะบะพัะพััะนย ะทะฐะฟัััะธั ะฝะฐัั ะฟะตัะฒัั DBT ะผะพะดะตะปั! ะะฝะฐ ัะถะต ะตััั ะฒ ะฟัะพะตะบัะต!</p>
<p>ะะปั ััะพะณะพ ะฒ ะฟะฐะฟะบะต dags ัะพะทะดะฐะดะธะผ ัะฐะนะป dbt_dag.py ะฒ VS code</p>
<p>ะะพะด ะดะปั dbt_dag.py:</p>
<pre><code>
from airflow.decorators import dag, taskย # ะธะผะฟะพััะธััะตะผ ะดะตะบะพัะฐัะพัั TaskFlow APIยย

from airflow.operators.bash import BashOperatorย # ะดะปั ะฒัะฟะพะปะฝะตะฝะธั bash-ะบะพะผะฐะฝะดยย

from datetime import datetimeย # ะดะปั ัะบะฐะทะฐะฝะธั ะฒัะตะผะตะฝะธ



# ๐ฏ ะะฟัะตะดะตะปัะตะผ DAG ั ะฟะพะผะพััั ะดะตะบะพัะฐัะพัะฐ @dag

@dag(

ยยยยdag_id='dbt_run_my_first_model',ย # ัะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั DAG

ยยยยschedule=None,ย ย ย ย ย ย ย ย ย ย # ะทะฐะฟััะบ ัะพะปัะบะพ ะฒัััะฝัั, ะฑะตะท ัะฐัะฟะธัะฐะฝะธั

ยยยยcatchup=False,ย ย ย ย ย ย ย ย ย ย # ะฝะต ะฒัะฟะพะปะฝััั ััะฐััะต ะดะฐัั ะฟัะธ ััะฐััะต

)

def dbt_dag():

ยยยย# ๐ง ะะฟะตัะฐัะพั ะดะปั ะทะฐะฟััะบะฐ DBT ัะตัะตะท Bash

ยยยยrun_dbt_model = BashOperator(

ยยยยยยยยtask_id=&quot;run_dbt_model_bash&quot;,ย # ะธะผั ะทะฐะดะฐัะธ

ยยยยยยยยbash_command=&quot;cd /opt/dbt/poligon &amp;&amp; echo '== DBT debug ==' &amp;&amp; dbt debug &amp;&amp; echo '== DBT run ==' &amp;&amp; dbt run --select my_first_dbt_model&quot;,ย # ะบะพะผะฐะฝะดะฐ ะดะปั ะฒัะฟะพะปะฝะตะฝะธั

ยยยยยยยยdo_xcom_push=True,ย # ัะพััะฐะฝัะตะผ ะฒัะฒะพะด ะบะพะผะฐะฝะดั ะฒ XCom (ัะตะทัะปััะฐัั)

ยยยย)

ยยยยยยยยยยยย#cd /opt/dbt/poligonย ย ย ย ย ย ย # ะฟะตัะตัะพะดะธะผ ะฒ ัะฐะฑะพััั ะดะธัะตะบัะพัะธั dbt

ยยยยยยยยยยยย#echo &quot;== DBT debug ==&quot; ย ย ย ย # ะฒัะฒะพะดะธะผ ะธะฝัะพัะผะฐัะธั

ยยยยยยยยยยยย#dbt debugย ย ย ย ย ย ย ย ย ย ย # ะฟัะพะฒะตััะตะผ ะบะพะฝัะธะณััะฐัะธั dbt

ยยยยยยยยยยยย#echo &quot;== DBT run ==&quot; ย ย ย ย ย # ะทะฐะฟััะบะฐะตะผ ะผะพะดะตะปั

ยยยยยยยยยยยย#dbt run --select models/example/my_first_dbt_model.sql - ะฟััั ะบ ะผะพะดะตะปะธ, --select ะฟะพะทะฒะพะปัะตั ะฒัะฑัะฐัั ะบะพะฝะบัะตัะฝัั ะผะพะดะตะปั



# โจ ะกะพะทะดะฐะฝะธะต ัะบะทะตะผะฟะปััะฐ DAG: Airflow ะฝะฐัะพะดะธั ะตะณะพ ะฟะพ ะฟะตัะตะผะตะฝะฝะพะน dag

dag = dbt_dag()
</code></pre>
<p>ะะพะณะดะฐ ัะพััะฐะฝะธะผ ัะฐะนะป DAG, ะฝะฐะดะพ ะฑัะดะตั ะฟะพะดะพะถะดะฐัั ะพะบะพะปะพ 5 ะผะธะฝัั, ะฟัะตะถะดะต ัะตะผ Airflow ะตะณะพ ัะฐัะฟะฐััะธั ะธ ะฒัะฒะตะดะตั ะฒ ะธะฝัะตััะตะนั. ะะฐัะฐะผะตััั ะฟะฐััะธะฝะณะฐ ะผะพะถะฝะพ ะฝะฐัััะฐะธะฒะฐัั, ะฝะพ ะปัััะต ัะปะธัะบะพะผ ัะฐััะพ ะฝะต ะดะตะปะฐัั.</p>
<p>๐งฉ ะงัะพ ะทะดะตัั ะธ ะบะฐะบ ะพะฑััะฝะพ ััััะพะตะฝ DAG</p>
<p>@dag-ะดะตะบะพัะฐัะพั</p>
<p>โ ะฟัะตะฒัะฐัะฐะตั ััะฝะบัะธั dbt_dag() ะฒ DAG-ะพะฑัะตะบั. ะะฒัะพะผะฐัะธัะตัะบะธ ัะตะณะธัััะธััะตััั, ะตัะปะธ ะฟัะธัะฒะพะตะฝะฐ ะณะปะพะฑะฐะปัะฝะพะน ะฟะตัะตะผะตะฝะฝะพะน (dag = โฆ)ย</p>
<p>ะัะณัะผะตะฝัั schedule=None, catchup=False</p>
<p>โ ะพะทะฝะฐัะฐะตั ะทะฐะฟััะบ ัะพะปัะบะพ ะฒัััะฝัั ะธ ะฟัะพะฟััะบ โะพัััะฐััะธัโ ะทะฐะฟััะบะพะฒย</p>
<p>BashOperator</p>
<p>โ ะพะดะธะฝ ะธะท ััะฐะฝะดะฐััะฝัั ะพะฟะตัะฐัะพัะพะฒ: ะฒัะฟะพะปะฝัะตั shell-ะบะพะผะฐะฝะดั. ะะดะตัั ะทะฐะฟััะบะฐะตััั dbt debug/runย</p>
<p>do_xcom_push=True</p>
<p>โ ัะพััะฐะฝัะตั ะฒัะฒะพะด ะบะพะผะฐะฝะดั ะฒ XCom, ััะพะฑั ะฟะตัะตะดะฐัั ะดััะณะธะผ ัะฐัะบะฐะผ โ ัะธะฟะธัะฝะฐั ะฟัะฐะบัะธะบะฐ ะธะฝัะตะณัะฐัะธะธ bash + TaskFlow. XCom - ััะพ ัะฐะบะฐั ััะตะฝั, ะบะพัะพัะฐั ะฟะตัะตะดะฐะตั ะดะฐะฝะฝัะต ะผะตะถะดั ะทะฐะดะฐัะฐะผะธ DAG ะธ ััะธ ะดะฐะฝะฝัะต ะผะพะถะฝะพ ะดะฐะถะต ะฒ ัะฟะตััะฐะทะดะตะปะต ะพะดะฝะพะธะผะตะฝะฝะพะผ ัะฒะธะดะตัั ะฒ UI Airflow. ะะพะฒะพะปัะฝะพ ัะดะพะฑะฝะพ</p>
<p>ะะฐะฒะธัะธะผะพััะธ</p>
<p>โ ะฒ ะดะฐะฝะฝะพะผ ะฟัะธะผะตัะต ะพะดะฝะฐ ะทะฐะดะฐัะฐ, ะฟะพััะพะผั ะฒัั ะฟัะพััะพ. ะะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั >>, &lt;&lt; ะธะปะธ TaskFlow ะฒัะทะพะฒั ะดะปั ะฟะพัััะพะตะฝะธั DAGย</p>
<p>๐ง ะขะธะฟะธัะฝะฐั ััััะบัััะฐ DAG ะฒ Airflow</p>
<ol>
<li>
<p>ะะฟัะตะดะตะปะตะฝะธะต DAG โ ัะตัะตะท ะดะตะบะพัะฐัะพั @dag(โฆ) ะธะปะธ ะบะพะฝัะตะบัั with DAG(โฆ).</p>
</li>
<li>
<p>ะะฟัะตะดะตะปะตะฝะธะต ะทะฐะดะฐั โ ัะฐัะบะธ ะปะธะฑะพ ัะตัะตะท ะดะตะบะพัะฐัะพัั @task, ะปะธะฑะพ ัะตัะตะท Operators (ะฝะฐะฟัะธะผะตั, BashOperator, PythonOperator).</p>
</li>
<li>
<p>ะะปะพะฑะฐะปัะฝัะน ัะบะทะตะผะฟะปัั DAG โ ะฟะตัะตะผะตะฝะฝะฐั ะฒ ะฟัะพัััะฐะฝััะฒะต ะธะผะตะฝ, ััะพะฑั Airflow ะตั ะพะฑะฝะฐััะถะธะป</p>
</li>
</ol>
<p>ะััะฐัะธ! ะั ะผะพะถะตะผ ะฒะธะดะตัั ะธ ัะตะดะฐะบัะธัะพะฒะฐัั ะบะพะด DAGะพะฒ ะฝะต ัะพะปัะบะพ ะฒ VS code! ะั ะถะต ะตัะต ะธ code editor ะฟะพััะฐะฒะธะปะธ! ะะณะพ ะผะพะถะฝะพ ะฝะฐะนัะธ ะฒ ัะฐะทะดะตะปะต Plugins. ะัะบัะพะตะผ ะตะณะพ ะธ ัะฒะธะดะธะผย ัะฐะนะป ะฝะฐัะตะณะพ DAG ั ัะพััะฐ!๐</p>
<p><img src="../../../../attachments/poligon_airflow_dbt_9.png" width="auto" height="auto" alt/>
ะะฐะปะตะต ะทะฐัะพะดะธะผ ะฒ ัะฐะทะดะตะป dags ะธ ะดะตะปะฐะตะผ trigger ะฝะฐัะตะณะพ dag! ะะฐ unpause ะพััะฐะฒะปัะตะผ ะณะฐะปะพัะบั. ะะดะตะผ ะฟะพะบะฐ ะฒัะต ััะฟะตัะฝะพ ะทะฐะฟัััะธััั!
<img src="../../../../attachments/poligon_airflow_dbt_10.png" width="auto" height="auto" alt/>
<img src="../../../../attachments/poligon_airflow_dbt_11.png" width="auto" height="auto" alt/></p>
<p><img src="../../../../attachments/poligon_airflow_dbt_12.png" width="auto" height="auto" alt/>
ะะฐัะพะดะธะผ ะฒ Clickhouse ะธ ะฒะธะดะธะผ ัะฐะฑะปะธัะบั ะพั ะฝะฐัะตะน ะฟะตัะฒะพะน DBT ะผะพะดะตะปะธ!
<img src="../../../../attachments/poligon_airflow_dbt_13.png" width="auto" height="auto" alt/></p>
<p>ะะตะณะฐ ะณะพะพะพะพะพะพะพะพะพะพะพะพะพะป ะฒัะตะผ, ะบัะพ ัะฟัะฐะฒะธะปัั!๐ธ๐ท๐ป</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> ยฉ 2026</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function E(a,e){if(!a)return;function t(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function n(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}a?.addEventListener("click",t),window.addCleanup(()=>a?.removeEventListener("click",t)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function f(a){for(;a.firstChild;)a.removeChild(a.firstChild)}var m=class{constructor(e,t){this.container=e;this.content=t;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),t=this.onMouseMove.bind(this),n=this.onMouseUp.bind(this),o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this),s=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),this.container.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i),window.addEventListener("resize",s),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",t),()=>document.removeEventListener("mouseup",n),()=>this.container.removeEventListener("touchstart",o),()=>document.removeEventListener("touchmove",r),()=>document.removeEventListener("touchend",i),()=>window.removeEventListener("resize",s))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),n=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(n),e.appendChild(o),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let n=document.createElement("button");return n.textContent=e,n.className="mermaid-control-button",n.addEventListener("click",t),window.addCleanup(()=>n.removeEventListener("click",t)),n}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onTouchStart(e){if(e.touches.length!==1)return;this.isDragging=!0;let t=e.touches[0];this.startPan={x:t.clientX-this.currentPan.x,y:t.clientY-this.currentPan.y}}onTouchMove(e){if(!this.isDragging||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.currentPan={x:t.clientX-this.startPan.x,y:t.clientY-this.startPan.y},this.updateTransform()}onTouchEnd(){this.isDragging=!1}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),n=this.content.getBoundingClientRect(),o=n.width/2,r=n.height/2,i=t-this.scale;this.currentPan.x-=o*i,this.currentPan.y-=r*i,this.scale=t,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){let t=this.content.querySelector("svg").getBoundingClientRect(),n=t.width/this.scale,o=t.height/this.scale;this.scale=1,this.currentPan={x:(this.container.clientWidth-n)/2,y:(this.container.clientHeight-o)/2},this.updateTransform()}},T=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],y;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;y||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let t=y.default,n=new WeakMap;for(let r of e)n.set(r,r.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let c=n.get(s);c&&(s.innerHTML=c)}let r=T.reduce((s,c)=>(s[c]=window.getComputedStyle(document.documentElement).getPropertyValue(c),s),{}),i=document.documentElement.getAttribute("saved-theme")==="dark";t.initialize({startOnLoad:!1,securityLevel:"loose",theme:i?"dark":"base",themeVariables:{fontFamily:r["--codeFont"],primaryColor:r["--light"],primaryTextColor:r["--darkgray"],primaryBorderColor:r["--tertiary"],lineColor:r["--darkgray"],secondaryColor:r["--secondary"],tertiaryColor:r["--tertiary"],clusterBkg:r["--light"],edgeLabelBackground:r["--highlight"]}}),await t.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let r=0;r<e.length;r++){let v=function(){let g=l.querySelector("#mermaid-space"),h=l.querySelector(".mermaid-content");if(!h)return;f(h);let w=i.querySelector("svg").cloneNode(!0);h.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new m(g,h)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},i=e[r],s=i.parentElement,c=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(c),L=c.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),E(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="../../../../postscript.js" type="module" data-persist="true"></script></html>